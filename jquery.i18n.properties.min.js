(function(l){function u(a){a.debug&&(f("callbackIfComplete()"),f("totalFiles: "+a.totalFiles),f("filesLoaded: "+a.filesLoaded));a.async&&a.filesLoaded===a.totalFiles&&a.callback&&a.callback()}function n(a,c){c.debug&&f("loadAndParseFiles");null!==a&&0<a.length?v(a[0],c,function(){a.shift();n(a,c)}):u(c)}function v(a,c,k){c.debug&&(f("loadAndParseFile('"+a+"')"),f("totalFiles: "+c.totalFiles),f("filesLoaded: "+c.filesLoaded));null!==a&&"undefined"!==typeof a&&l.ajax({url:a,async:c.async,cache:c.cache,
dataType:"text",contentType:"Content-type: text/plain; charset="+c.encoding,beforeSend:function(a){a.overrideMimeType("text/html;charset="+c.encoding)},success:function(e,b){c.debug&&(f("Succeeded in downloading "+a+"."),f(e));w(e,c);k()},error:function(e,b,d){c.debug&&f("Failed to download or parse "+a+". errorThrown: "+d);404===e.status&&--c.totalFiles;k()}})}function w(a,c){for(var k="",e=a.split(/\n/),b=/(\{\d+})/g,d=/\{(\d+)}/g,f=/(\\u.{4})/ig,g=0,x=e.length;g<x;g++){var m=e[g];m=m.trim();if(0<
m.length&&"#"!=m.match("^#")){var p=m.split("=");if(0<p.length){m=decodeURI(p[0]).trim();for(var h=1==p.length?"":p[1];-1!=h.search(/\\$/);)h=h.substring(0,h.length-1),h+=e[++g].trimRight();for(var q=2;q<p.length;q++)h+="="+p[q];h=h.trim();if("map"==c.mode||"both"==c.mode)(p=h.match(f))&&p.forEach(function(a){h=h.replace(a,y(a))}),c.namespace?l.i18n.map[c.namespace][m]=h:l.i18n.map[m]=h;if("vars"==c.mode||"both"==c.mode)if(h=h.replace(/"/g,'\\"'),z(m),b.test(h)){var n=!0,r="",t=[];h.split(b).forEach(function(a){!b.test(a)||
0!==t.length&&-1!=t.indexOf(a)||(n||(r+=","),r+=a.replace(d,"v$1"),t.push(a),n=!1)});k+=m+"=function("+r+"){";m='"'+h.replace(d,'"+v$1+"')+'"';k+="return "+m+";};"}else k+=m+'="'+h+'";'}}}eval(k);c.filesLoaded+=1}function z(a){if(/\./.test(a)){var c="";a=a.split(/\./);for(var k=0,e=a.length;k<e;k++){var b=a[k];0<k&&(c+=".");c+=b;eval("typeof "+c+' == "undefined"')&&eval(c+"={};")}}}function y(a){var c=[];a=parseInt(a.substr(2),16);0<=a&&a<Math.pow(2,16)&&c.push(a);return c.reduce(function(a,c){return a+
String.fromCharCode(c)},"")}l.i18n={};l.i18n.map={};var f=function(a){window.console&&console.log("i18n::"+a)};l.i18n.properties=function(a){a=l.extend({name:"Messages",language:"",path:"",namespace:null,mode:"vars",cache:!1,debug:!1,encoding:"UTF-8",async:!1,callback:null},a);a.namespace&&"string"==typeof a.namespace&&(a.namespace.match(/^[a-z]*$/)?l.i18n.map[a.namespace]={}:(f("Namespaces can only be lower case letters, a - z"),a.namespace=null));a.path.match(/\/$/)||(a.path+="/");a.language=this.normaliseLanguageCode(a);
var c=a.name&&a.name.constructor===Array?a.name:[a.name];a.totalFiles=2*c.length+(5<=a.language.length?c.length:0);a.debug&&f("totalFiles: "+a.totalFiles);a.filesLoaded=0;c.forEach(function(c){var e=a.path+c+".properties";var b=a.language.substring(0,2);b=a.path+c+"_"+b+".properties";if(5<=a.language.length){var d=a.language.substring(0,5);c=a.path+c+"_"+d+".properties";e=[e,b,c]}else e=[e,b];n(e,a)});a.callback&&!a.async&&a.callback()};l.i18n.prop=function(a){var c=[].slice.call(arguments);if(2==
c.length)if(l.isArray(c[1]))var k=c[1];else if("object"===typeof c[1]){var e=c[1].namespace;var b=c[1].replacements;c.splice(-1,1);b&&Array.prototype.push.apply(c,b)}b=e?l.i18n.map[e][a]:l.i18n.map[a];if(null===b||"undefined"===typeof b)return"["+(e?e+"#"+a:a)+"]";var d;if("string"==typeof b){for(d=0;-1!=(d=b.indexOf("\\",d));)b="t"==b.charAt(d+1)?b.substring(0,d)+"\t"+b.substring(d++ +2):"r"==b.charAt(d+1)?b.substring(0,d)+"\r"+b.substring(d++ +2):"n"==b.charAt(d+1)?b.substring(0,d)+"\n"+b.substring(d++ +
2):"f"==b.charAt(d+1)?b.substring(0,d)+"\f"+b.substring(d++ +2):"\\"==b.charAt(d+1)?b.substring(0,d)+"\\"+b.substring(d++ +2):b.substring(0,d)+b.substring(d+1);var f=[],g;for(d=0;d<b.length;)if("'"==b.charAt(d))if(d==b.length-1)b=b.substring(0,d);else if("'"==b.charAt(d+1))b=b.substring(0,d)+b.substring(++d);else{for(g=d+2;-1!=(g=b.indexOf("'",g));)if(g==b.length-1||"'"!=b.charAt(g+1)){b=b.substring(0,d)+b.substring(d+1,g)+b.substring(g+1);d=g-1;break}else b=b.substring(0,g)+b.substring(++g);-1==
g&&(b=b.substring(0,d)+b.substring(d+1))}else if("{"==b.charAt(d))if(g=b.indexOf("}",d+1),-1==g)d++;else{var n=parseInt(b.substring(d+1,g));!isNaN(n)&&0<=n?(d=b.substring(0,d),""!==d&&f.push(d),f.push(n),d=0,b=b.substring(g+1)):d=g+1}else d++;""!==b&&f.push(b);b=f;e?l.i18n.map[settings.namespace][a]=f:l.i18n.map[a]=f}if(0===b.length)return"";if(1==b.length&&"string"==typeof b[0])return b[0];e="";d=0;for(g=b.length;d<g;d++)e="string"==typeof b[d]?e+b[d]:k&&b[d]<k.length?e+k[b[d]]:!k&&b[d]+1<c.length?
e+c[b[d]+1]:e+("{"+b[d]+"}");return e};l.i18n.normaliseLanguageCode=function(a){var c=a.language;if(!c||2>c.length)a.debug&&f("No language supplied. Pulling it from the browser ..."),c=navigator.languages&&0<navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage||"en",a.debug&&f("Language from browser: "+c);c=c.toLowerCase();c=c.replace(/-/,"_");3<c.length&&(c=c.substring(0,3)+c.substring(3).toUpperCase());return c}})(jQuery);